{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$comment": "https://raw.githubusercontent.com/nimling/json-schema/main/policy-as-code/common-pac.json#/properties/item",
    "type": "object",
    "properties": {
        "managementGroupName": {
            "type": "string"
        },
        "managedIdentityLocation": {
            "description": "Policies with Modify and DeployIfNotExists effects require a Managed Identity for the remediation task. This section defines the location of the managed identity. It is often created in the tenant's primary location. This location can be overridden in the Policy Assignment files",
            "type": "object",
            "properties": {
                "*": {
                    "description": "match all PacEnvironmentSelector values, not othervise defined",
                    "$ref": "#/properties/azLocations"
                }
            },
            "additionalProperties": {
                "$ref": "#/properties/azLocations"
            },
            "minProperties": 1
        },
        "guid": {
            "$ref": "https://raw.githubusercontent.com/nimling/json-schema/main/common-json-07.json#/properties/guid"
        },
        "globalNotScopes": {
            "type": "object",
            "description": "Resource Group patterns allow us to exclude special managed Resource Groups. The exclusion is not dynamic. It is calculated when the deployment scripts execute.",
            "properties": {
                "*": {
                    "description": "any scope. not contained to a specific PacEnvironment",
                    "type": "array",
                    "items": {
                        "$ref": "#/properties/notScopeValues"
                    }
                }
            },
            "additionalProperties": {
                "description": "any scope. not contained to a specific PacEnvironment",
                "type": "array",
                "items": {
                    "$ref": "#/properties/notScopeValues"
                }
            }
        },
        "globalScopes": {
            "type": "object",
            "description": "List of scopes for assignment.",
            "properties": {
                "*": {
                    "description": "any scope. not contained to a specific PacEnvironment",
                    "type": "array",
                    "items": {
                        "$ref": "#/properties/scopeValues"
                    }
                }
            },
            "additionalProperties": {
                "description": "any scope. not contained to a specific PacEnvironment",
                "type": "array",
                "items": {
                    "$ref": "#/properties/scopeValues"
                }
            }
        },
        "ScopeMgmt": {
            "description": "managementgroup scope",
            "type": "string",
            "pattern": "^\\/providers\\/Microsoft[.]Management\\/managementGroups\\/[a-zA-Z0-9-]{3,}$",
            "examples": [
                "/providers/Microsoft.Management/managementGroups/myManagementGroupId"
            ]
        },
        "scopeSub": {
            "description": "subscriptions scope",
            "type": "string",
            "pattern": "^\\/subscriptions\\/[a-fA-F0-9-]{36}$",
            "examples": [
                "/subscriptions/00000000-0000-0000-000000000000"
            ]
        },
        "scopeRg": {
            "description": "resourceGroups scope",
            "type": "string",
            "pattern": "^\\/subscriptions\\/[a-fA-F0-9-]{36}\\/resourceGroups\\/[^\\/]{3,}$",
            "examples": [
                "/subscriptions/00000000-0000-0000-000000000000/resourceGroups/myResourceGroup"
            ]
        },
        "scopeRgPattern": {
            "description": "resourceGroupPatterns scope",
            "type": "string",
            "pattern": "^\\/resourceGroupPatterns\\/([*]|)[^\\/*]{1,}([*]|)$",
            "examples": [
                "/resourceGroupPatterns/name",
                "/resourceGroupPatterns/name*",
                "/resourceGroupPatterns/*name",
                "/resourceGroupPatterns/*name*"
            ]
        },
        "scopeValues": {
            "oneOf": [
                {
                    "$ref": "#/properties/ScopeMgmt"
                },
                {
                    "$ref": "#/properties/scopeSub"
                },
                {
                    "$ref": "#/properties/scopeRg"
                }
            ]
        },
        "notScopeValues": {
            "oneOf": [
                {
                    "$ref": "#/properties/ScopeMgmt"
                },
                {
                    "$ref": "#/properties/scopeSub"
                },
                {
                    "$ref": "#/properties/scopeRg"
                },
                {
                    "$ref": "#/properties/scopeRgPattern"
                }
            ]
        },
        "azLocations": {
            "type": "string",
            "enum": [
                "eastasia",
                "southeastasia",
                "centralus",
                "eastus",
                "eastus2",
                "westus",
                "northcentralus",
                "southcentralus",
                "northeurope",
                "westeurope",
                "japanwest",
                "japaneast",
                "brazilsouth",
                "australiaeast",
                "australiasoutheast",
                "southindia",
                "centralindia",
                "westindia",
                "canadacentral",
                "canadaeast",
                "uksouth",
                "ukwest",
                "westcentralus",
                "westus2",
                "koreacentral",
                "koreasouth",
                "francecentral",
                "francesouth",
                "australiacentral",
                "australiacentral2",
                "uaecentral",
                "uaenorth",
                "southafricanorth",
                "southafricawest",
                "switzerlandnorth",
                "switzerlandwest",
                "germanynorth",
                "germanywestcentral",
                "norwaywest",
                "norwayeast",
                "brazilsoutheast",
                "westus3",
                "swedencentral",
                "qatarcentral"
            ]
        }
    }
}